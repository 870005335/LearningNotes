# 虚拟机栈

## 虚拟机栈概述

由于跨平台性的设计，Java的指令都是根据栈来设计的。不同平台的CPU架构不同，所以不能设计为基于寄存器的。

- 优点：跨平台，指令集小，编译器容易实现。
- 缺点：性能下降，实现同样的功能需要更多的指令

有不少Java开发人员一提到Java的内存结构，就会非常粗粒度地将JVM中的内存区理解为仅有Java堆（heap）和Java栈（stack）？为什么？

首先栈是运行时的单位，而堆是存储的单位

- 栈解决程序的运行问题，即程序如何执行，或着说如何处理数据。
- 堆是解决数据存储的问题，即数据怎么放，放哪里

![image-20221018210254937](虚拟机栈.assets/image-20221018210254937.png)

## Java虚拟机栈是什么

Java虚拟机栈（Java Virtual Machine Stack）,早期也叫Java栈。每个线程在创建时都会创建一个虚拟机栈，其内部保存一个个的栈帧（Stack Frame），对应着一次次的Java方法调用。

> 是线程私有

![image-20221018210648930](虚拟机栈.assets/image-20221018210648930.png)

## 生命周期

生命周期和线程一致，也就是线程结束了，该虚拟机栈也销毁了。